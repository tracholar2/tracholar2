
 <!DOCTYPE HTML>
<html >
<head>
  <meta charset="UTF-8">
  
    <title>调试TensorFlow程序 | 智子</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="zhizi">
    

    
    <meta name="description" content="调试TensorFlow程序TensorFlow调试器（tfdbg）是TensorFlow的专用调试器。它 让您查看运行TensorFlow图的内部结构和状态在训练和推理过程中，这是很难与通用调试 调试器，例如由于TensorFlow的计算图范例而导致的Python pdb。  注意：支持的外部平台上的tfdbg的系统要求包括 下列。在Mac OS X上，ncurses库是必需的。有可能 与bre">
<meta name="keywords" content="机器学习">
<meta property="og:type" content="article">
<meta property="og:title" content="调试TensorFlow程序">
<meta property="og:url" content="https://www.tracholar.top/2018/01/01/debugger/index.html">
<meta property="og:site_name" content="智子">
<meta property="og:description" content="调试TensorFlow程序TensorFlow调试器（tfdbg）是TensorFlow的专用调试器。它 让您查看运行TensorFlow图的内部结构和状态在训练和推理过程中，这是很难与通用调试 调试器，例如由于TensorFlow的计算图范例而导致的Python pdb。  注意：支持的外部平台上的tfdbg的系统要求包括 下列。在Mac OS X上，ncurses库是必需的。有可能 与bre">
<meta property="og:image" content="https://www.tensorflow.org/images/tfdbg_screenshot_run_start.png">
<meta property="og:image" content="https://www.tensorflow.org/images/tfdbg_screenshot_run_end_accuracy.png">
<meta property="og:image" content="https://www.tensorflow.org/images/tfdbg_screenshot_run_end_inf_nan.png">
<meta property="og:image" content="https://www.tensorflow.org/images/tfdbg_screenshot_run_end_node_info.png">
<meta property="og:image" content="https://www.tensorflow.org/images/tfdbg_screenshot_run_end_annotated_source.png">
<meta property="og:updated_time" content="2018-01-16T14:34:50.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="调试TensorFlow程序">
<meta name="twitter:description" content="调试TensorFlow程序TensorFlow调试器（tfdbg）是TensorFlow的专用调试器。它 让您查看运行TensorFlow图的内部结构和状态在训练和推理过程中，这是很难与通用调试 调试器，例如由于TensorFlow的计算图范例而导致的Python pdb。  注意：支持的外部平台上的tfdbg的系统要求包括 下列。在Mac OS X上，ncurses库是必需的。有可能 与bre">
<meta name="twitter:image" content="https://www.tensorflow.org/images/tfdbg_screenshot_run_start.png">

    
    <link rel="alternative" href="/atom.xml" title="智子" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/jacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/jacman.jpg">
    
    <link rel="stylesheet" href="/css/style.css">

    <!-- ad start -->
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-6300557868920774",
    enable_page_level_ads: true
  });
</script>

    <!-- ad end -->

    <!--  stat -->
    <script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?4036f580b1119e720db871571faa68cc";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();
</script>

    <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-78529611-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-78529611-1');
</script>

    <!-- end stat -->
</head>

  <body>
    <header>
      
<div>
		
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="智子">智子</a></h1>
				<h2 class="blog-motto">智子之家</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜单">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">Home</a></li>
					
						<li><a href="/archives">Archives</a></li>
					
						<li><a href="/about">About</a></li>
					
					<li>
 					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="search" id="search" name="q" autocomplete="off" maxlength="20" placeholder="搜索" />
						<input type="hidden" name="q" value="site:www.tracholar.top">
					</form>
					
					</li>
				</ul>
			</nav>			
</div>
    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">
  
	<article itemprop="articleBody">
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2018/01/01/debugger/" title="调试TensorFlow程序" itemprop="url">调试TensorFlow程序</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="zhizi" target="_blank" itemprop="author">zhizi</a>
		
  <p class="article-time">
    <time datetime="2018-01-01T02:00:00.000Z" itemprop="datePublished"> 发表于 2018-01-01</time>
    
  </p>
</header>
	<div class="article-content">
		
		<div id="toc" class="toc-article">
			<strong class="toc-title">文章目录</strong>
		
			<ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#undefined"><span class="toc-number">1.</span> <span class="toc-text">调试TensorFlow程序</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#undefined"><span class="toc-number">1.1.</span> <span class="toc-text">用tfdbg包装TensorFlow会话</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#undefined"><span class="toc-number">1.2.</span> <span class="toc-text">用tfdbg调试模型训练</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#undefined"><span class="toc-number">1.2.1.</span> <span class="toc-text">tfdbg CLI经常使用的命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#undefined"><span class="toc-number">1.2.2.</span> <span class="toc-text">tfdbg CLI的其他功能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#undefined"><span class="toc-number">1.2.3.</span> <span class="toc-text">寻找nan和inf</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#undefined"><span class="toc-number">1.2.4.</span> <span class="toc-text">解决问题</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#undefined"><span class="toc-number">1.3.</span> <span class="toc-text">调试tf学习估计器和实验</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#undefined"><span class="toc-number">1.3.1.</span> <span class="toc-text">调试tf.contrib.learn估计器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#undefined"><span class="toc-number">1.3.2.</span> <span class="toc-text">调试tf.contrib.learn实验</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#undefined"><span class="toc-number">1.4.</span> <span class="toc-text">用TFDBG调试Keras模型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#undefined"><span class="toc-number">1.5.</span> <span class="toc-text">用TFDBG调试tf-slim</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#undefined"><span class="toc-number">1.6.</span> <span class="toc-text">脱机调试远程运行的会话</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#undefined"><span class="toc-number">1.6.1.</span> <span class="toc-text">调试远程tf.Sessions</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#undefined"><span class="toc-number">1.6.2.</span> <span class="toc-text">C ++和其他语言</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#undefined"><span class="toc-number">1.6.3.</span> <span class="toc-text">调试远程运行tf学习估计器和实验</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#undefined"><span class="toc-number">1.7.</span> <span class="toc-text">经常问的问题</span></a></li></ol></li></ol>
		
		</div>
		

        <ins class="adsbygoogle"
     style="display:block; text-align:center; overflow:hidden;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-6300557868920774"
     data-ad-slot="6882414849"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>


		<h1><span id="调试tensorflow程序">调试TensorFlow程序</span></h1><p>TensorFlow调试器（tfdbg）是TensorFlow的专用调试器。它 让您查看运行TensorFlow图的内部结构和状态<br>在训练和推理过程中，这是很难与通用调试 调试器，例如由于TensorFlow的计算图范例而导致的Python <code>pdb</code>。</p>
<blockquote>
<p>注意：支持的外部平台上的tfdbg的系统要求包括 下列。在Mac OS X上，<code>ncurses</code>库是必需的。有可能 与<code>brew install
homebrew/dupes/ncurses</code>一起安装。在Windows上，<code>pyreadline</code><br>是必须的。如果您使用Anaconda3，则可以使用命令进行安装 如<code>&quot;C:\Program Files\Anaconda3\Scripts\pip.exe&quot;
install pyreadline</code>。</p>
</blockquote>
<p>本教程演示如何使用tfdbg命令行界面 （CLI）来调试<code>nan</code>的外观 和<code>inf</code>，这是一个经常遇到的问题 TensorFlow模型开发中的错误类型。<br>以下示例适用于使用低级别的用户 <code>Session</code> API TensorFlow。本文档的后面部分介绍了如何使用tfdbg 采用更高级别的API，即tf-<br>learn <code>Estimator</code>和<code>Experiment</code>。 要观察这样的问题，运行下面的命令没有调试器（ 源代码可以找到 这里）：</p>
<pre><code>python -m tensorflow.python.debug.examples.debug_mnist
</code></pre><p>此代码为MNIST数字图像识别训练一个简单的神经网络。 请注意，在第一个训练步骤之后，准确度略有增加，但是 然后卡在一个很低的（几率）水平：</p>
<pre><code>Accuracy at step 0: 0.1113
Accuracy at step 1: 0.3183
Accuracy at step 2: 0.098
Accuracy at step 3: 0.098
Accuracy at step 4: 0.098
</code></pre><p>想知道什么可能会出错，你怀疑在某些节点 训练图生成错误的数值，如<code>inf</code>和<code>nan</code>，因为 这是这种训练失败的常见原因。<br>我们使用tfdbg来调试这个问题，并精确定位这个节点 数字问题首先浮出水面。</p>
<h2><span id="用tfdbg包装tensorflow会话">用tfdbg包装TensorFlow会话</span></h2><p>在我们的例子中添加对tfdbg的支持，只需要添加 遵循以下代码行并用调试器包装器包装Session对象。 这个代码已经被添加进去了<br>debug_mnist.py， 因此您可以在命令行中使用<code>--debug</code>标志激活tfdbg CLI。</p>
<pre><code># Let your BUILD target depend on &quot;//tensorflow/python/debug:debug_py&quot;
# (You don&apos;t need to worry about the BUILD dependency if you are using a pip
#  install of open-source TensorFlow.)
from tensorflow.python import debug as tf_debug

sess = tf_debug.LocalCLIDebugWrapperSession(sess)
</code></pre><p>这个包装与Session具有相同的接口，因此启用调试需要 没有其他更改的代码。包装提供了额外的功能， 包含：</p>
<p>在<code>Session.run()</code>呼叫前后拨打CLI，让你 控制执行并检查图形的内部状态。 允许您为张量值注册特殊的<code>filters</code>，以方便使用<br>问题的诊断。</p>
<p>在这个例子中，我们已经注册了一个叫做张量过滤器 <code>tfdbg.has_inf_or_nan</code>， 它只是确定是否有任何<code>nan</code>或<code>inf</code>值<br>中间张量（既不是输入也不是输出的张量） <code>Session.run()</code>的调用，但是都在从输入到输出的路径上<br>输出）。该滤波器适用于<code>nan</code>，而<code>inf</code>则是一种常见的用例 我们用它运送它 <code>debug_data</code> 模块。</p>
<p>注意：您也可以编写自己的自定义过滤器。看到 API文档 <code>DebugDumpDir.find()</code>的更多信息。</p>
<h2><span id="用tfdbg调试模型训练">用tfdbg调试模型训练</span></h2><p>让我们再次尝试训练模型，但这次添加了<code>--debug</code>标志：</p>
<pre><code>python -m tensorflow.python.debug.examples.debug_mnist --debug
</code></pre><p>调试包装会话将提示您何时执行第一个 <code>Session.run()</code>调用，提供有关取出张量和进给的信息 字典显示在屏幕上。</p>
<p><img src="https://www.tensorflow.org/images/tfdbg_screenshot_run_start.png" alt="tfdbg run-start
UI"></p>
<p>这就是我们所说的运行启动CLI。它列出了提要和提取 到当前的<code>Session.run</code>调用，在执行任何事情之前。</p>
<p>如果屏幕尺寸太小，则无法在其中显示消息的内容 完整，你可以调整它。</p>
<p>使用PageUp / PageDown / Home / End键导航 屏幕输出。在大多数键盘上缺少这些键Fn + Up / Fn +向下/ Fn +向右/<br>Fn +向左将工作。</p>
<p>在命令提示符处输入<code>run</code>命令（或者只是<code>r</code>）：</p>
<pre><code>tfdbg&gt; run
</code></pre><p><code>run</code>命令导致tfdbg执行，直到下一个结束 <code>Session.run()</code>调用，它使用测试数据计算模型的准确性 组。<br>tfdbg扩展运行时图形以转储所有中间张量。 运行结束后，tfdbg将显示所有转储的张量值 运行结束CLI。例如：</p>
<p><img src="https://www.tensorflow.org/images/tfdbg_screenshot_run_end_accuracy.png" alt="tfdbg run-end UI:
accuracy"></p>
<p>之后可以通过运行命令<code>lt</code>来获得张量列表 执行<code>run</code>。</p>
<h3><span id="tfdbg-cli经常使用的命令">tfdbg CLI经常使用的命令</span></h3><p>请在<code>tfdbg&gt;</code>提示符处尝试以下命令（参考中的代码）<br><code>tensorflow/python/debug/examples/debug_mnist.py</code>）：</p>
<table>
<thead>
<tr>
<th>Command</th>
<th>Syntax or Option</th>
<th>Explanation</th>
<th>Example  </th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><code>lt</code></strong></td>
<td></td>
<td><strong>List dumped tensors.</strong></td>
<td><code>lt</code>  </td>
</tr>
<tr>
<td></td>
<td><code>-n &lt;name_pattern&gt;</code></td>
<td>List dumped tensors with names matching given</td>
</tr>
<tr>
<td>regular-expression pattern.</td>
<td><code>lt -n Softmax.*</code>  </td>
</tr>
<tr>
<td></td>
<td><code>-t &lt;op_pattern&gt;</code></td>
<td>List dumped tensors with op types matching given</td>
</tr>
<tr>
<td>regular-expression pattern.</td>
<td><code>lt -t MatMul</code>  </td>
</tr>
<tr>
<td></td>
<td><code>s &lt;sort_key&gt;</code></td>
<td>Sort the output by given <code>sort_key</code>, whose possible values</td>
</tr>
<tr>
<td>are <code>timestamp</code> (default), <code>dump_size</code>, <code>op_type</code> and <code>tensor_name</code>.</td>
<td>`lt -s</td>
</tr>
</tbody>
</table>
<p>dump_size<code>|</code>-r<code>| Sort in reverse order. |</code>lt -r -s dump_size<code>**</code>pt<code>** |  | **Print value of a dumped tensor.** |  
|</code>pt <tensor><code>|  Print tensor value. |</code>pt hidden/Relu:0<code>|</code>pt <tensor>[slicing]<code>| Print a subarray of tensor, using
[numpy](http://www.numpy.org/)-style array slicing. |</code>pt<br>hidden/Relu:0[0:50,:]<code>|</code>-a<code>| Print the entirety of a large tensor, without using ellipses. (May
take a long time for large tensors.) |</code>pt -a hidden/Relu:0[0:50,:]<code>|</code>-r <range><code>| Highlight elements falling into specified numerical range.
Multiple ranges can be used in conjunction. |</code>pt hidden/Relu:0 -a -r<br>[[-inf,-1],[1,inf]]<code>|</code>-s<code>| Include a summary of the numeric values of the tensor (applicable
only to non-empty tensors with Boolean and numeric types such as</code>int<em><code>and</code>float</em><code>.) |</code>pt -s hidden/Relu:0[0:50,:]<code>**</code>@[coordinates]<code>** |  |  Navigate to specified element in</code>pt<code>output. |</code>@[10,0]<code>or</code>@10,0<code>**</code>/regex<code>** |  | [less](https://linux.die.net/man/1/less)-style search for
given regular expression. |</code>/inf<code>**</code>/<code>** |  |  Scroll to the next line with matches to the searched regex (if
any). |</code>/<code>**</code>pf<code>** |  | **Print a value in the feed_dict to</code>Session.run<code>.** |  
|</code>pf <feed_tensor_name><code>|  Print the value of the feed. Also note that the</code>pf<code>command has the</code>-a<code>,</code>-r<code>and</code>-s<code>flags (not listed below), which have
the same syntax and semantics as the identically-named flags of</code>pt<code>. |</code>pf<br>input_xs:0<code>**eval** |  | **Evaluate arbitrary Python and numpy expression.** |  
|</code>eval <expression><code>|  Evaluate a Python / numpy expression, with numpy
available as</code>np<code>and debug tensor names enclosed in backticks. |</code>eval<br>“np.matmul((<code>output/Identity:0</code> / <code>Softmax:0</code>).T, <code>Softmax:0</code>)”<code>|</code>-a<code>| Print a large-sized evaluation result in its entirety, i.e., without
using ellipses. |</code>eval -a ‘np.sum(<code>Softmax:0</code>, axis=1)’<code>**</code>ni<code>** |  | **Display node information.** |  
|</code>-a<code>|  Include node attributes in the output. |</code>ni -a hidden/Relu<code>|</code>-d<code>| List the debug dumps available from the node. |</code>ni -d hidden/Relu<code>|</code>-t<code>| Display the Python stack trace of the node&#39;s creation. |</code>ni -t<br>hidden/Relu<code>**</code>li<code>** |  | **List inputs to node** |  
|</code>-r<code>|  List the inputs to node, recursively (the input tree.) |</code>li -r<br>hidden/Relu:0<code>|</code>-d <max_depth><code>| Limit recursion depth under the</code>-r<code>mode. |</code>li -r -d 3<br>hidden/Relu:0<code>|</code>-c<code>| Include control inputs. |</code>li -c -r hidden/Relu:0<code>**</code>lo<code>** |  | **List output recipients of node** |  
|</code>-r<code>|  List the output recipients of node, recursively (the output tree.) |</code>lo -r hidden/Relu:0<code>|</code>-d <max_depth><code>| Limit recursion depth under the</code>-r<code>mode. |</code>lo -r -d 3<br>hidden/Relu:0<code>|</code>-c<code>| Include recipients via control edges. |</code>lo -c -r hidden/Relu:0<code>**</code>ls<code>** |  | **List Python source files involved in node creation.** |  
|</code>-p <path_pattern><code>|  Limit output to source files matching given regular-
expression path pattern. |</code>ls -p .<em>debug_mnist.</em><code>|</code>-n<code>| Limit output to node names matching given regular-expression pattern.
|</code>ls -n Softmax.<em><code>**</code>ps<code>** |  | **Print Python source file.** |  
|</code>ps <file_path><code>|  Print given Python source file source.py, with the lines
annotated with the nodes created at each of them (if any). |</code>ps<br>/path/to/source.py<code>|</code>-t<code>| Perform annotation with respect to Tensors, instead of the default,
nodes. |</code>ps -t /path/to/source.py<code>|</code>-b <line_number><code>| Annotate source.py beginning at given line. |</code>ps -b 30<br>/path/to/source.py<code>|</code>-m <max_elements><code>| Limit the number of elements in the annotation for
each line. |</code>ps -m 100 /path/to/source.py<code>**</code>run<code>** |  | **Proceed to the next Session.run()** |</code>run<code>|</code>-n<code>|  Execute through the next</code>Session.run<code>without debugging, and drop
to CLI right before the run after that. |</code>run -n<code>|</code>-t <t><code>| Execute</code>Session.run<code></code>T - 1<code>times without debugging, followed
by a run with debugging. Then drop to CLI right after the debugged run. |</code>run<br>-t 10<code>|</code>-f <filter_name><code>| Continue executing</code>Session.run<code>until any intermediate
tensor triggers the specified Tensor filter (causes the filter to return</code>True<code>). |</code>run -f has_inf_or_nan<code>|</code>–node_name_filter <pattern><code>| Execute the next</code>Session.run<code>, watching
only nodes with names matching the given regular-expression pattern. |</code>run<br>–node_name_filter Softmax.</pattern></filter_name></t></max_elements></line_number></file_path></em><code>|</code>–op_type_filter <pattern><code>| Execute the next</code>Session.run<code>, watching only
nodes with op types matching the given regular-expression pattern. |</code>run<br>–op_type_filter Variable.<em><code>|</code>–tensor_dtype_filter <pattern><code>| Execute the next</code>Session.run<code>, dumping
only Tensors with data types (</code>dtype<code>s) matching the given regular-expression
pattern. |</code>run –tensor_dtype_filter int.</pattern></em><code>|</code>-p<code>| Execute the next</code>Session.run<code>call in profiling mode. |</code>run -p<code>**</code>ri<code>** |  | **Display information about the run the current run, including
fetches and feeds.** |</code>ri<code>**</code>help<code>** |  | **Print general help information** |</code>help<code>|</code>help <command><code>|  Print help for given command. |</code>help lt`  </pattern></path_pattern></max_depth></max_depth></expression></feed_tensor_name></range></tensor></tensor></p>
<p>请注意，每当您输入一个命令，一个新的屏幕输出 会出现。这有点类似于浏览器中的网页。您可以 点击<code>&lt;--</code>和 CLI左上角附近的<code>--&gt;</code>文本箭头。</p>
<h3><span id="tfdbg-cli的其他功能">tfdbg CLI的其他功能</span></h3><p>除了上面列出的命令外，tfdbg CLI还提供了以下内容 附加功能：</p>
<p>要浏览以前的tfdbg命令，请输入几个字符     接着是向上或向下箭头键。 tfdbg会告诉你的历史     以这些字符开始的命令。<br>要浏览屏幕输出的历史记录，请执行以下任一操作     以下： 使用<code>prev</code>和<code>next</code>命令。 点击下划线旁边的<code>&lt;--</code>和<code>--&gt;</code>链接左上角<br>屏幕。 Tab完成命令和一些命令参数。 要将屏幕输出重定向到文件而不是屏幕，请结束     命令与bash风格的重定向。例如，下面的命令<br>将pt命令的输出重定向到<code>/tmp/xent_value_slices.txt</code>     文件：</p>
<blockquote>
<p>tfdbg&gt; pt cross_entropy / Log：0 [:, 0:10]&gt; /tmp/xent_value_slices.txt</p>
</blockquote>
<h3><span id="寻找nan和inf">寻找<code>nan</code>和<code>inf</code></span></h3><p>在这首<code>Session.run()</code>调用中，碰巧没有问题的数字 值。您可以使用命令<code>run</code>或其命令进行下一次运行 速记<code>r</code>。</p>
<blockquote>
<p>提示：如果您重复输入<code>run</code>或<code>r</code>，您将可以移动 <code>Session.run()</code>按顺序调用。<br>您也可以使用<code>-t</code>标志前进一些<code>Session.run()</code>呼叫 一次，例如： tfdbg&gt; run -t 10</p>
</blockquote>
<p>而不是反复输入<code>run</code>并手动搜索<code>nan</code> 每次<code>inf</code>调用后的<code>Session.run()</code>在运行结束UI（例如，通过使用<br><code>pt</code>的命令如上表所示），可以使用以下命令 命令让调试器无需重复执行<code>Session.run()</code>调用<br>停止在运行开始或运行结束提示符，直到第一台<code>nan</code>或<code>inf</code> 值在图中显示。这类似于中的条件断点 一些程序语言调试器：</p>
<pre><code>tfdbg&gt; run -f has_inf_or_nan
</code></pre><blockquote>
<p>注：上述命令正常工作，因为张量过滤器被称为 <code>has_inf_or_nan</code>已经在包装会话时注册 创建。该滤波器检测<code>nan</code>和<code>inf</code>（如前所述）。<br>如果你已经注册了其他的过滤器，你可以 使用“运行-f”使tfdbg运行，直到任何张量触发该过滤器（原因 过滤器返回True）。 def<br>my_filter_callable（数据，张量）：   ＃一个检测零值标量的过滤器。   返回len（tensor.shape）== 0和张量== 0.0<br>sess.add_tensor_filter（’my_filter’，my_filter_callable）<br>然后在tfdbg运行启动提示符运行，直到您的过滤器被触发： tfdbg&gt;运行-f my_filter</p>
</blockquote>
<p>看到这个API文档 以获取更多关于预期签名和返回值的信息 <code>Callable</code>与<code>add_tensor_filter()</code>一起使用。</p>
<p><img src="https://www.tensorflow.org/images/tfdbg_screenshot_run_end_inf_nan.png" alt="tfdbg run-end UI: infs and
nans"></p>
<p>当屏幕显示在第一行时，首先触发<code>has_inf_or_nan</code>滤波器 在第四次<code>Session.run()</code>呼叫期间：一个 亚当优化器<br>图上前进后退训练传球。在这个运行中，36（总数中 95）中间张量包含<code>nan</code>或<code>inf</code>值。这些张力被列出 按照时间顺序，左边显示时间戳。在顶部<br>的列表中，可以看到第一个张量中的数值不好 首先浮出水面：<code>cross_entropy/Log:0</code>。</p>
<p>要查看张量的值，请单击带下划线的张量名称 <code>cross_entropy/Log:0</code>或输入等效命令：</p>
<pre><code>tfdbg&gt; pt cross_entropy/Log:0
</code></pre><p>向下滚动一下，你会注意到一些零散的<code>inf</code>值。如果 <code>inf</code>和<code>nan</code>的实例难以一目了然，您可以使用 以下命令执行正则表达式搜索并突出显示输出：</p>
<pre><code>tfdbg&gt; /inf
</code></pre><p>或者，或者：</p>
<pre><code>tfdbg&gt; /(inf|nan)
</code></pre><p>您也可以使用<code>-s</code>或<code>--numeric_summary</code>命令快速总结 张量中的数值类型：</p>
<pre><code>tfdbg&gt; pt -s cross_entropy/Log:0
</code></pre><p>从总结中，可以看到1000个元素中的几个 <code>cross_entropy/Log:0</code>张量器是<code>-inf</code>s（负无穷）。</p>
<p>为什么出现这些无穷大？为了进一步调试，显示更多信息 通过单击带下划线的<code>cross_entropy/Log</code>菜单关于节点<code>node_info</code><br>项目顶部或输入相应的node_info（<code>ni</code>）命令：</p>
<pre><code>tfdbg&gt; ni cross_entropy/Log
</code></pre><p><img src="https://www.tensorflow.org/images/tfdbg_screenshot_run_end_node_info.png" alt="tfdbg run-end UI: infs and
nans"></p>
<p>你可以看到这个节点的操作类型是<code>Log</code> 其输入是节点<code>softmax/Softmax</code>。运行以下命令 仔细看一下输入张量：</p>
<pre><code>tfdbg&gt; pt softmax/Softmax:0
</code></pre><p>检查输入张量中的值，搜索零：</p>
<pre><code>tfdbg&gt; /0\.000
</code></pre><p>确实有零。现在很清楚，数字的来源是不好的 值为节点<code>cross_entropy/Log</code>记录零。为了找出答案<br>Python源代码中的罪魁祸首，使用<code>-t</code>命令的<code>ni</code>标志 显示节点构造的回溯：</p>
<pre><code>tfdbg&gt; ni -t cross_entropy/Log
</code></pre><p>如果您点击屏幕顶部的“node_info”，tfdbg会自动显示 回溯节点的构造。</p>
<p>从追溯，你可以看到，操作是在以下构建 线： <code>debug_mnist.py</code>：</p>
<pre><code>diff = y_ * tf.log(y)
</code></pre><p>tfdbg有一个功能，可以很容易地跟踪张量和操作回来 Python源文件中的行。它可以注释一个Python文件的行 他们创造的ops或张量。要使用此功能，<br>只需单击堆栈跟踪输出中的带下划线的行号即可 <code>ni -t &lt;op_name&gt;</code>命令，或者使用<code>ps</code>（或<code>print_source</code>）命令，例如： <code>ps
/path/to/source.py</code>。例如，以下屏幕截图显示了输出 <code>ps</code>命令。</p>
<p><img src="https://www.tensorflow.org/images/tfdbg_screenshot_run_end_annotated_source.png" alt="tfdbg run-end UI: annotated Python source
file"></p>
<h3><span id="解决问题">解决问题</span></h3><p>要解决这个问题，编辑<code>debug_mnist.py</code>，改变原来的行：</p>
<pre><code>diff = -(y_ * tf.log(y))
</code></pre><p>到softmax交叉熵的内置数值稳定实现：</p>
<pre><code>diff = tf.nn.softmax_cross_entropy_with_logits(labels=y_, logits=logits)
</code></pre><p>重新运行<code>--debug</code>标志如下：</p>
<pre><code>python -m tensorflow.python.debug.examples.debug_mnist --debug
</code></pre><p>在<code>tfdbg&gt;</code>提示符处，输入以下命令：</p>
<pre><code>run -f has_inf_or_nan`
</code></pre><p>确认没有张量被标记为包含<code>nan</code>或<code>inf</code>值，并且 精度现在继续上升而不是卡住。成功！</p>
<h2><span id="调试tf学习估计器和实验">调试tf学习估计器和实验</span></h2><p>本节介绍如何调试使用<code>Estimator</code>的TensorFlow程序 和<code>Experiment</code> API。这些API所提供的部分便利是<br>他们在内部管理<code>Session</code>。这使得<code>LocalCLIDebugWrapperSession</code> 在前面的章节中描述不适用。幸运的是，你仍然可以<br>使用<code>hook</code>提供的<code>tfdbg</code>进行调试。</p>
<h3><span id="调试tfcontriblearn估计器">调试tf.contrib.learn估计器</span></h3><p>目前，<code>tfdbg</code>可以进行调试 <code>fit()</code> <code>evaluate()</code> 学习<code>Estimator</code>s的方法。为了调试<code>Estimator.fit()</code>，<br>创建一个<code>LocalCLIDebugHook</code>并在<code>monitors</code>参数中提供。例如：</p>
<pre><code># First, let your BUILD target depend on &quot;//tensorflow/python/debug:debug_py&quot;
# (You don&apos;t need to worry about the BUILD dependency if you are using a pip
#  install of open-source TensorFlow.)
from tensorflow.python import debug as tf_debug

# Create a LocalCLIDebugHook and use it as a monitor when calling fit().
hooks = [tf_debug.LocalCLIDebugHook()]

classifier.fit(x=training_set.data,
               y=training_set.target,
               steps=1000,
               monitors=hooks)
</code></pre><p>要调试<code>Estimator.evaluate()</code>，请将钩子分配给<code>hooks</code>参数，如 下面的例子：</p>
<pre><code>accuracy_score = classifier.evaluate(x=test_set.data,
                                     y=test_set.target,
                                     hooks=hooks)[&quot;accuracy&quot;]
</code></pre><p>debug_tflearn_iris.py， 基于{$ tflearn $ tf-learn的虹膜教程}，包含了一个完整的例子<br>与<code>Estimator</code>一起使用tfdbg。要运行这个例子，请执行：</p>
<pre><code>python -m tensorflow.python.debug.examples.debug_tflearn_iris --debug
</code></pre><h3><span id="调试tfcontriblearn实验">调试tf.contrib.learn实验</span></h3><p><code>Experiment</code>是<code>tf.contrib.learn</code>中的一种构建体 <code>Estimator</code>。 它提供了一个单一的界面来训练和评估一个模型。调试<br><code>train()</code>和<code>evaluate()</code>调用<code>Experiment</code>对象，您可以<br>当分别使用关键字参数<code>train_monitors</code>和<code>eval_hooks</code>时 调用它的构造函数。例如：</p>
<pre><code># First, let your BUILD target depend on &quot;//tensorflow/python/debug:debug_py&quot;
# (You don&apos;t need to worry about the BUILD dependency if you are using a pip
#  install of open-source TensorFlow.)
from tensorflow.python import debug as tf_debug

hooks = [tf_debug.LocalCLIDebugHook()]

ex = experiment.Experiment(classifier,
                           train_input_fn=iris_input_fn,
                           eval_input_fn=iris_input_fn,
                           train_steps=FLAGS.train_steps,
                           eval_delay_secs=0,
                           eval_steps=1,
                           train_monitors=hooks,
                           eval_hooks=hooks)

ex.train()
accuracy_score = ex.evaluate()[&quot;accuracy&quot;]
</code></pre><p>要在<code>debug_tflearn_iris</code>模式下构建并运行<code>Experiment</code>示例，请执行以下操作：</p>
<pre><code>python -m tensorflow.python.debug.examples.debug_tflearn_iris \
    --use_experiment --debug
</code></pre><p><code>LocalCLIDebugHook</code>还允许您配置<code>watch_fn</code>，该<code>Tensor</code>可以<br>用于灵活指定在不同的<code>Session.run()</code>上观看的<code>fetches</code><br>呼叫，作为<code>feed_dict</code>和<code>LocalCLIDebugWrapperSession</code>等状态的功能。看到 这个API文档 更多细节。</p>
<h2><span id="用tfdbg调试keras模型">用TFDBG调试Keras模型</span></h2><p>要使用Keras的TFDBG，请让Keras后端使用 一个TFDBG包装的Session对象。例如，要使用CLI包装器：</p>
<pre><code>import tensorflow as tf
from keras import backend as keras_backend
from tensorflow.python import debug as tf_debug

keras_backend.set_session(tf_debug.LocalCLIDebugWrapperSession(tf.Session()))

# Define your keras model, called &quot;model&quot;.
model.fit(...)  # This will break into the TFDBG CLI.
</code></pre><h2><span id="用tfdbg调试tf-slim">用TFDBG调试tf-slim</span></h2><p>TFDBG目前只支持训练 TF-渺茫。 为了调试培训过程，请提供<code>session_wrapper</code><br><code>slim.learning.train()</code>的<code>offline_analyzer</code>参数。例如：</p>
<pre><code>import tensorflow as tf
from tensorflow.python import debug as tf_debug

# ... Code that creates the graph and the train_op ...
tf.contrib.slim.learning_train(
    train_op,
    logdir,
    number_of_steps=10,
    session_wrapper=tf_debug.LocalCLIDebugWrapperSession)
</code></pre><h2><span id="脱机调试远程运行的会话">脱机调试远程运行的会话</span></h2><p>通常情况下，您的模型运行在远程机器上或者您没有的进程中 有终端访问权限。要在这种情况下执行模型调试，可以使用<br><code>tfdbg</code>的二元<code>Session</code>（下面描述）。它运行 转储的数据目录。这可以对较低级别的<code>Estimator</code> API完成<br>以及更高级别的<code>Experiment</code>和<code>tf.Session</code> API。</p>
<h3><span id="调试远程tfsessions">调试远程tf.Sessions</span></h3><p>如果您直接与<code>python</code>中的<code>RunOptions</code> API交互，则可以<br>配置您称为<code>Session.run()</code>方法的<code>tfdbg.watch_graph</code>原型 用<code>Session.run()</code>方法进行。<br>这将导致中间张量和运行时图被转储到一个 发生<code>offline_analyzer</code>呼叫时，您选择的共享存储位置 （以较慢的性能为代价）。例如：</p>
<pre><code>from tensorflow.python import debug as tf_debug

# ... Code where your session and graph are set up...

run_options = tf.RunOptions()
tf_debug.watch_graph(
      run_options,
      session.graph,
      debug_urls=[&quot;file:///shared/storage/location/tfdbg_dumps_1&quot;])
# Be sure to specify different directories for different run() calls.

session.run(fetches, feed_dict=feeds, options=run_options)
</code></pre><p>之后，在您有终端访问权的环境中（例如，本地 可以访问代码中指定的共享存储位置的计算机 上面），您可以加载和检查共享上的转储目录中的数据<br>通过使用<code>tfdbg</code>的<code>Session</code>二进制文件进行存储。例如：</p>
<pre><code>python -m tensorflow.python.debug.cli.offline_analyzer \
    --dump_dir=/shared/storage/location/tfdbg_dumps_1
</code></pre><p><code>DumpingDebugWrapperSession</code>包装机<code>tf_debug.DumpingDebugWrapperSession</code>提供了一个更容易，更多<br>灵活的方式来生成可离线分析的文件系统转储。 要使用它，只需将您的会话包装在<code>watch_fn</code>中即可。 例如：</p>
<pre><code># Let your BUILD target depend on &quot;//tensorflow/python/debug:debug_py
# (You don&apos;t need to worry about the BUILD dependency if you are using a pip
#  install of open-source TensorFlow.)
from tensorflow.python import debug as tf_debug

sess = tf_debug.DumpingDebugWrapperSession(
    sess, &quot;/shared/storage/location/tfdbg_dumps_1/&quot;, watch_fn=my_watch_fn)
</code></pre><p><code>Callable</code>参数接受<code>tensor</code>，允许您配置 <code>Session.run()</code>可以在不同的<code>fetches</code>呼叫上观看，作为<br><code>feed_dict</code>和<code>run()</code>到<code>debug_options</code>的呼叫等状态。</p>
<h3><span id="c-和其他语言">C ++和其他语言</span></h3><p>如果你的模型代码是用C ++或其他语言编写的，你也可以 修改<code>RunOptions</code>的<code>Estimator</code>字段以生成调试转储 可以离线检查。看到<br>原始的定义 更多细节。</p>
<h3><span id="调试远程运行tf学习估计器和实验">调试远程运行tf学习估计器和实验</span></h3><p>如果您的远程TensorFlow服务器运行<code>DumpingDebugHook</code>， 您可以使用非交互式<code>hook</code>。例如：</p>
<pre><code># Let your BUILD target depend on &quot;//tensorflow/python/debug:debug_py
# (You don&apos;t need to worry about the BUILD dependency if you are using a pip
#  install of open-source TensorFlow.)
from tensorflow.python import debug as tf_debug

hooks = [tf_debug.DumpingDebugHook(&quot;/shared/storage/location/tfdbg_dumps_1&quot;)]
</code></pre><p>那么这个<code>LocalCLIDebugHook</code>可以像<code>Estimator</code>一样使用 如前所述。<br>作为<code>Experiment</code>或<code>/shared/storage/location/tfdbg_dumps_1/run_&lt;epoch_timestamp_microsec&gt;_&lt;uuid&gt;</code>的培训和/或评估<br>发生，tfdbg创建具有以下名称模式的目录： <code>Session.run()</code>。 每个目录对应于底层的<code>fit()</code>呼叫<br><code>evaluate()</code>或<code>offline_analyzer</code>呼叫。你可以加载这些目录并检查 他们在一个命令行界面中以离线方式使用<br>由tfdbg提供的<code>lt</code>。例如：</p>
<pre><code>python -m tensorflow.python.debug.cli.offline_analyzer \
    --dump_dir=&quot;/shared/storage/location/tfdbg_dumps_1/run_&lt;epoch_timestamp_microsec&gt;_&lt;uuid&gt;&quot;
</code></pre><h2><span id="经常问的问题">经常问的问题</span></h2><p>问：<code>tfdbg&gt; run -p</code>输出左侧的时间戳是否反映了实际情况        性能在非调试会话？</p>
<p>答：不可以。调试器将额外的专用调试节点插入到        图表来记录中间张量的值。这些节点        减慢图形执行速度。如果你有兴趣分析你的<br>模型，检查出来</p>
<p>tfdbg的分析模式：<code>Session</code>。 tfprof       和其他TensorFlow分析工具。</p>
<p>问：如何将tfdbg与Bazel中的<code>&quot;//tensorflow:tensorflow_py&quot;</code>链接起来？我为什么看到一个<br>错误，如“ImportError：无法导入名称调试”？</p>
<p>答：在您的BUILD规则中，声明依赖关系：        <code>&quot;//tensorflow/python/debug:debug_py&quot;</code>和<code>Session</code>。<br>第一个是你甚至包括使用TensorFlow的依赖        没有调试器的支持;第二个启用调试器。        然后，在你的Python文件中，添加：</p>
<pre><code>from tensorflow.python import debug as tf_debug

# Then wrap your TensorFlow Session with the local-CLI wrapper.
sess = tf_debug.LocalCLIDebugWrapperSession(sess)
</code></pre><p>问：tfdbg是否帮助调试运行时错误，如形状不匹配？</p>
<p>答：是的。 tfdbg截取运行时产生的错误并呈现        在CLI中给用户一些调试指令的错误。        看例子：</p>
<pre><code># Debugging shape mismatch during matrix multiplication.
python -m tensorflow.python.debug.examples.debug_errors \
    --error shape_mismatch --debug

# Debugging uninitialized variable.
python -m tensorflow.python.debug.examples.debug_errors \
    --error uninitialized_variable --debug
</code></pre><p>问：如何让我的tfdbg包装的会话或挂钩运行调试模式 只从主线程？</p>
<p>A： 这是一个常见的用例，其中<code>thread_name_filter</code>对象是从多个使用的 线程并发。通常，子线程负责后台任务<br>如运行入队操作。通常情况下，你只想调试主 线程（或不太频繁，只有一个子线程）。你可以使用<br><code>LocalCLIDebugWrapperSession</code>的<code>Session</code>关键字参数 实现这种类型的线程选择性调试。例如，要从中调试<br>主线程，构建包装<code>MainThread</code>如下：</p>
<pre><code>sess = tf_debug.LocalCLIDebugWrapperSession(sess, thread_name_filter=&quot;MainThread$&quot;)
</code></pre><p>上面的例子依赖于Python中的主线程有这个事实 默认名称<code>tf.while_loop</code>。</p>
<p>问：我正在调试的模型非常大。数据由tfdbg转储 填补我的磁盘的可用空间。我能做什么？</p>
<p>A： 在以下任何情况下，您可能会遇到此问题：</p>
<p>具有许多中间张量的模型 非常大的中间张量 许多<code>LocalCLIDebugWrapperSession</code>迭代</p>
<p>有三种可能的解决方法或解决方案：</p>
<p><code>LocalCLIDebugHook</code>和<code>dump_root</code>的制造商    提供关键字参数<code>.*hidden.*</code>来指定路径<br>tfdbg将转储调试数据。你可以用它来让tfdbg转储    调试具有较大可用空间的磁盘上的数据。例如：</p>
<p>```python    ＃对于LocalCLIDebugWrapperSession    sess =<br>tf_debug.LocalCLIDebugWrapperSession（dump_root =“/ with / lots / of / space”）</p>
<p>＃对于LocalCLIDebugHook    hooks = [tf_debug.LocalCLIDebugHook（dump_root =“/ with<br>/ lots / of / space”）]    <code>`    确保dump_root指向的目录是空的或不存在的。    tfdbg在退出之前清理转储目录。
*减少运行过程中使用的批量。 *使用tfdbg&#39;srun</code>命令的过滤选项只能观察特定的    图中的节点。例如：</p>
<p>tfdbg&gt; run –node_name_filter。<em> hidden。</em>    tfdbg&gt;运行–op_type_filter变量。<em><br>tfdbg&gt; run –tensor_dtype_filter int。</em></p>
<p>上面的第一个命令只监视名字匹配的节点    正则表达模式<code>Variable.*</code>。第二个命令只监视    名称与<code>int.*</code>型号匹配的操作。第三个手表<br>只有与<code>int32</code>型（例如<code>mouse off</code>）匹配的张量。</p>
<p>问：为什么我不能在tfdbg CLI中选择文本？</p>
<p>答：这是因为tfdbg CLI通过在终端中启用鼠标事件        默认。这个鼠标掩码模式        覆盖默认的终端交互，包括文本选择。您<br>可以使用命令<code>m off</code>或者重新启用文本选择        <code>a</code>。</p>
<p>问：为什么在调试下面的代码时，tfdbg CLI显示没有转储张量？</p>
<pre><code>a = tf.ones([10], name=&quot;a&quot;)
b = tf.add(a, a, name=&quot;b&quot;)
sess = tf.Session()
sess = tf_debug.LocalCLIDebugWrapperSession(sess)
sess.run(b)
</code></pre><p>- 答：你看到没有数据倾倒的原因是因为在每个节点        执行的TensorFlow图形由TensorFlow运行时间不断折叠。<br>在这个层面上，<code>b</code>是一个常数张量;因此，取而代之        张量<code>a</code>也是一个常量张量。 TensorFlow的图表<br>优化将包含<code>b</code>和<code>tfdbg</code>的图形折叠成一个        以加速图形的未来运行，这也是<code>a</code>的原因<br>不会产生任何中间张量转储。但是，如果<code>tf.Variable</code>是一个        <code>tfdbg</code>，如下例所示：</p>
<pre><code>import numpy as np

a = tf.Variable(np.ones[10], name=&quot;a&quot;)
b = tf.add(a, a, name=&quot;b&quot;)
sess = tf.Session()
sess.run(tf.global_variables_initializer())
sess = tf_debug.LocalCLIDebugWrapperSession(sess)
sess.run(b)
</code></pre><p>CXJ743-HDK-53L将不会出现恒定折叠的情况 张量转储。</p>


        <p style="margin-top:2em; text-align:left; font-weight:bold; font-style: italic;">未经作者同意，本文严禁转载，违者必究！</p>
	</div>
		<footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/机器学习/">机器学习</a>
  </div>

</div>



	<div class="article-share" id="share">
	
	  <div data-url="https://www.tracholar.top/2018/01/01/debugger/" data-title="调试TensorFlow程序 | 智子" data-tsina="" class="share clearfix">
	  </div>
	
	</div>


</footer>


	</article>
	
<nav class="article-nav clearfix">
 
 <div class="prev" >
 <a href="/2018/01/01/optimizing/" title="针对移动设备进行优化">
  <strong>上一篇：</strong><br/>
  <span>
  针对移动设备进行优化</span>
</a>
</div>


<div class="next">
<a href="/2018/01/01/estimators/"  title="估计">
 <strong>下一篇：</strong><br/> 
 <span>估计
</span>
</a>
</div>

</nav>

	



</div>

      <div class="openaside"><a class="navbutton" href="#" title="显示侧边栏"></a></div>

  <div id="toc" class="toc-aside">
  <strong class="toc-title">文章目录</strong>
 
 <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#undefined"><span class="toc-number">1.</span> <span class="toc-text">调试TensorFlow程序</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#undefined"><span class="toc-number">1.1.</span> <span class="toc-text">用tfdbg包装TensorFlow会话</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#undefined"><span class="toc-number">1.2.</span> <span class="toc-text">用tfdbg调试模型训练</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#undefined"><span class="toc-number">1.2.1.</span> <span class="toc-text">tfdbg CLI经常使用的命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#undefined"><span class="toc-number">1.2.2.</span> <span class="toc-text">tfdbg CLI的其他功能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#undefined"><span class="toc-number">1.2.3.</span> <span class="toc-text">寻找nan和inf</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#undefined"><span class="toc-number">1.2.4.</span> <span class="toc-text">解决问题</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#undefined"><span class="toc-number">1.3.</span> <span class="toc-text">调试tf学习估计器和实验</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#undefined"><span class="toc-number">1.3.1.</span> <span class="toc-text">调试tf.contrib.learn估计器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#undefined"><span class="toc-number">1.3.2.</span> <span class="toc-text">调试tf.contrib.learn实验</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#undefined"><span class="toc-number">1.4.</span> <span class="toc-text">用TFDBG调试Keras模型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#undefined"><span class="toc-number">1.5.</span> <span class="toc-text">用TFDBG调试tf-slim</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#undefined"><span class="toc-number">1.6.</span> <span class="toc-text">脱机调试远程运行的会话</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#undefined"><span class="toc-number">1.6.1.</span> <span class="toc-text">调试远程tf.Sessions</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#undefined"><span class="toc-number">1.6.2.</span> <span class="toc-text">C ++和其他语言</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#undefined"><span class="toc-number">1.6.3.</span> <span class="toc-text">调试远程运行tf学习估计器和实验</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#undefined"><span class="toc-number">1.7.</span> <span class="toc-text">经常问的问题</span></a></li></ol></li></ol>
 
  </div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隐藏侧边栏"></a></div>
<aside class="clearfix">
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- side-bar-ad -->
<ins class="adsbygoogle"
     style="display:block; overflow:hidden;"
     data-ad-client="ca-pub-6300557868920774"
     data-ad-slot="2232545787"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>


  


  
<div class="tagslist">
	<p class="asidetitle">标签</p>
		<ul class="clearfix">
		
			
				<li><a href="/tags/javascript/" title="javascript">javascript<sup>207</sup></a></li>
			
		
			
				<li><a href="/tags/java/" title="java">java<sup>205</sup></a></li>
			
		
			
				<li><a href="/tags/html/" title="html">html<sup>203</sup></a></li>
			
		
			
				<li><a href="/tags/python/" title="python">python<sup>199</sup></a></li>
			
		
			
				<li><a href="/tags/bash/" title="bash">bash<sup>198</sup></a></li>
			
		
			
				<li><a href="/tags/php/" title="php">php<sup>197</sup></a></li>
			
		
			
				<li><a href="/tags/css/" title="css">css<sup>88</sup></a></li>
			
		
			
				<li><a href="/tags/shell/" title="shell">shell<sup>78</sup></a></li>
			
		
			
				<li><a href="/tags/jquery/" title="jquery">jquery<sup>61</sup></a></li>
			
		
			
				<li><a href="/tags/linux/" title="linux">linux<sup>57</sup></a></li>
			
		
			
				<li><a href="/tags/机器学习/" title="机器学习">机器学习<sup>41</sup></a></li>
			
		
			
				<li><a href="/tags/unix/" title="unix">unix<sup>30</sup></a></li>
			
		
			
				<li><a href="/tags/mysql/" title="mysql">mysql<sup>17</sup></a></li>
			
		
			
				<li><a href="/tags/html5/" title="html5">html5<sup>16</sup></a></li>
			
		
			
				<li><a href="/tags/xml/" title="xml">xml<sup>13</sup></a></li>
			
		
			
				<li><a href="/tags/http/" title="http">http<sup>10</sup></a></li>
			
		
			
				<li><a href="/tags/区块链/" title="区块链">区块链<sup>1</sup></a></li>
			
		
		</ul>
</div>


  <div class="linkslist">
  <p class="asidetitle">友情链接</p>
    <ul>
        
          <li>
            
            	<a href="https://tracholar.github.io" target="_blank" title="个人博客">个人博客</a>
            
          </li>
        
    </ul>
</div>

  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS 订阅</a>
</div>

</aside>
</div>

    </div>
    <footer><div id="footer" >
	
	
	<section class="info">
		<p> To be or not to be, that is a question. <br/>
			This is my blog,believe it or not.</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		
		
		
		
		
		
		
		
		
	</div>
			
		

		<p class="copyright">
		版权所有 © 2018 本站文章未经同意，禁止转载！作者：
		
		<a href="/about" target="_blank" title="zhizi">zhizi</a>
		


		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/jquery.qrcode-0.12.0.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
      
      $('#toc.toc-aside').css('display', 'none');
        
    }
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){ 
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  c.click(function(){
    ta.css('display', 'block').addClass('fadeIn');
  });
  o.click(function(){
    ta.css('display', 'none');
  });
  $(window).scroll(function(){
    ta.css("top",Math.max(140,320-$(this).scrollTop()));
  });
});
</script>


<script type="text/javascript">
$(document).ready(function(){ 
  var $this = $('.share'),
      url = $this.attr('data-url'),
      encodedUrl = encodeURIComponent(url),
      title = $this.attr('data-title'),
      tsina = $this.attr('data-tsina'),
      description = $this.attr('description');
  var html = [
  '<div class="hoverqrcode clearfix"></div>',
  '<a class="overlay" id="qrcode"></a>',
  '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
  '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
  '<a href="#qrcode" class="article-share-qrcode" title="微信"></a>',
  '<a href="http://widget.renren.com/dialog/share?resourceUrl=' + encodedUrl + '&srcUrl=' + encodedUrl + '&title=' + title +'" class="article-share-renren" target="_blank" title="人人"></a>',
  '<a href="http://service.weibo.com/share/share.php?title='+title+'&url='+encodedUrl +'&ralateUid='+ tsina +'&searchPic=true&style=number' +'" class="article-share-weibo" target="_blank" title="微博"></a>',
  '<span title="Share to"></span>'
  ].join('');
  $this.append(html);

  $('.hoverqrcode').hide();

  var myWidth = 0;
  function updatehoverqrcode(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
    var qrsize = myWidth > 1024 ? 200:100;
    var options = {render: 'image', size: qrsize, fill: '#2ca6cb', text: url, radius: 0.5, quiet: 1};
    var p = $('.article-share-qrcode').position();
    $('.hoverqrcode').empty().css('width', qrsize).css('height', qrsize)
                          .css('left', p.left-qrsize/2+20).css('top', p.top-qrsize-10)
                          .qrcode(options);
  };
  $(window).resize(function(){
    $('.hoverqrcode').hide();
  });
  $('.article-share-qrcode').click(function(){
    updatehoverqrcode();
    $('.hoverqrcode').toggle();
  });
  $('.article-share-qrcode').hover(function(){}, function(){
      $('.hoverqrcode').hide();
  });
});   
</script>











<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->





<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="返回顶部"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  </body>
</html>
